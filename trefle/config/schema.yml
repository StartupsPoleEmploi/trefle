constante:
  minimum_aref:
    type: integer
    format: float
    value: 616.2
    label: minimum AREF
  rff:
    type: integer
    format: float
    value: 652.02
    label: montant de la RFF en vigueur
    description: montant de la RFF (net)
  codes_financeur_individuel:
    description: ensemble des codes financeur individuel
    type: array
    items:
      type: integer
      enum: &codes_financeur
        0: Autre
        1: Code(s) obsolète(s)
        2: Conseil régional
        3: Fonds européens - FSE
        4: Pôle emploi
        5: Entreprise
        6: ACSÉ (anciennement FASILD)
        7: Agefiph
        8: Conseil départemental
        9: Commune
        10: Bénéficiaire de l'action
        11: Etat - Ministère chargé de l'emploi
        12: Etat - Ministère de l'éducation nationale
        13: Etat - Autre
        14: Fonds européens - Autre
        15: Autre collectivé territoriale
        16: OPCA
        17: OPACIF
    value: [0, 5, 10]
    label: codes financeur individuel
    url: http://lheo.gouv.fr/langage#dict-financeurs
  codes_financeur_collectif:
    description: ensemble des codes financeur collectif
    type: array
    items:
      type: integer
      enum: *codes_financeur
    value: [2, 4, 6, 7, 8, 9, 11, 12, 13, 15, 16]
    label: codes financeur collectif
    url: http://lheo.gouv.fr/langage#dict-financeurs
  idcc_artisanat:
    description: ensemble des codes IDCC de l'artisanat
    type: array
    items:
      type: string
      format: idcc
    value: ["1596", "1638", "1722A", "1758", "1779", "2032", "2194", "2195", "2267", "2585"]
    label: codes IDCC de l'artisanat
  codes_cpf_vae:
    description: liste des codes CPF identifiant une formation VAE
    type: array
    items:
      type: integer
    value: [200]
    label: codes CPF VAE
  codes_cpf_clea:
    description: liste des codes CPF identifiant une formation CleA
    type: array
    items:
      type: integer
    value: [201, 207, 208]
    label: codes CPF CléA
  # https://www.service-public.fr/particuliers/vosdroits/F2300
  smic:
    type: integer
    format: float
    value: 1498.47
    label: SMIC
  # TODO: move to preprocess
  deux_smic:
    type: integer
    format: float
    value: 2997
    label: deux fois le SMIC
  trois_smic:
    type: integer
    format: float
    value: 4495
    label: trois fois le SMIC
  quatre_smic:
    type: integer
    format: int32
    value: 5994
    label: quatre fois le SMIC
  codes_permis_b:
    type: array
    items:
      type: integer
    value: [54664]
    label: codes CERTIFINFO pour un permis B
  codes_spi:
    type: array
    items:
      type: integer
    value: [84385]
    label: codes CERTIFINFO pour un SPI
  codes_bilan_de_competences:
    type: array
    items:
      type: integer
    value: [93559]
    label: codes CERTIFINFO pour un bilan de compétences
  codes_bulats:
    type: array
    items:
      type: integer
    value: [95271, 84165, 84384]
    label: codes CERTIFINFO BULATS
  codes_bec:
    type: array
    items:
      type: integer
    value: [84166, 98623]
    label: codes CERTIFINFO BEC
  codes_toeic:
    type: array
    items:
      type: integer
    value: [84168]
    label: codes CERTIFINFO TOEIC
  codes_toefl:
    type: array
    items:
      type: integer
    value: [84167]
    label: codes CERTIFINFO TOEFL
  codes_fimo:
    type: array
    items:
      type: integer
    value: [31826]
    label: codes FORMACODE FIMO
  codes_tosa:
    type: array
    items:
      type: integer
    value: [84517]
    label: codes CERTIFINFO TOSA
  codes_caces:
    type: array
    items:
      type: integer
    value: [55673, 55674, 55675, 55676, 55677, 55803, 55804, 55805, 55806,55807, 55808, 55809,55810, 55811, 55812, 55813, 55814, 55815, 55816, 55817, 55818, 55819, 55820, 55822, 55821, 55823, 55824, 55825, 55826, 55827, 84700, 84449, 84700, 84715, 85312, 85338]
    label: codes CERTIFINFO CACES
  codes_ais_certifiants:
    value: [6, 7]
    label: codes AIS certifiants
    type: array
    gender: masculine
    number: plural
    items:
      type: integer
      enum: &codes_ais
        1: Code(s) obsolète(s)
        2: Perfectionnement, élargissement des compétences
        4: Création d'entreprise
        5: Remise à niveau, maîtrise des savoirs de base, initiation
        6: Certification
        7: Professionnalisation
        8: Préparation à la qualification
        9: (Re)mobilisation, aide à l'élaboration de projet professionnel
beneficiaire:
  droit_prive:
    description: le bénéficiaire est salarié d'une entreprise de droit privé
    type: boolean
    public: true
    label: bénéficiaire de droit privé
    gender: masculine
  inscrit_pe:
    alias: beneficiaire.inscritDE
    description: le bénéficiaire est inscrit à Pôle emploi commme demandeur d'emploi
    type: boolean
    public: true
    label: demandeur d'emploi
    gender: masculine
  solde_cpf:
    description: solde du compte CPF du bénéficiaire
    type: integer
    format: int32
    public: true
    label: solde CPF du bénéficiaire
    gender: masculine
  remuneration:
    description: Rémunération actuelle en euros
    type: integer
    format: money
    default: 0
    public: true
    label: rémunération du bénéficiaire
  allocation:
    alias: beneficiaire.allocation_cost
    description: montant de l'allocation en euros
    type: integer
    format: money
    default: 0
    public: true
    label: montant de l'allocation du bénéficiaire
    gender: masculine
  type_allocation:
    alias: beneficiaire.allocation_type
    type: string
    public: true
    enum:
      are: allocation d'aide au retour à l'emploi
      ass: allocation de solidarité spécifique
      rsa: revenu de solidarité active
      ata: allocation temporaire d'attente
      asr: allocation spécifique de reclassement
      atp: allocation de transition professionnelle
      asp: allocation de sécurisation professionnelle
      aex: allocation ex-employeur secteur public
    label: allocation du bénéficiaire
  fin_allocation:
    alias: beneficiaire.allocation_dateend
    type: string
    format: date
    public: true
    label: date de fin de l'allocation du bénéficiaire
  naissance:
    alias: individu.dateNaissance
    type: string
    format: date
    public: true
    label: date de naissance du bénéficiaire
  age:
    description: âge du beneficiaire
    type: integer
    format: int32
    public: true
    label: âge du bénéficiaire
    gender: masculine
  parent_isole:
    type: boolean
    public: true
    label: parent isolé
    gender: masculine
  mere_trois_enfants:
    type: boolean
    public: true
    label: mère de famille ayant au moins trois enfants
  veuve_ou_divorcee:
    type: boolean
    public: true
    label: femme divorcée, veuve ou séparée judiciairement depuis moins de trois ans
  creation_entreprise:
    alias: beneficiaire.situation_projetcreationentreprise
    type: boolean
    public: true
    label: bénéficiaire en situation de création d'entreprise nécessitant cette formation
  contrat_aide_actuel:
    alias: beneficiaire.situation_personneencourscontrataide
    type: boolean
    public: true
    label: bénéficiaire ayant un contrat aidé en cours
  contrat_aide_passe:
    alias: beneficiaire.situation_personnesortantcontrataide
    type: boolean
    public: true
    label: bénéficiaire ayant achevé un contrat aidé
  experience_professionnelle:
    description: nombre de mois travaillés sur les 5 dernières années
    type: integer
    format: int32
    public: true
    label: expérience professionnelle du bénéficiaire dans les cinq dernières années
  mois_travailles_en_cdd:
    description: nombre de mois travaillés sur un contrat CDD sur les 12 derniers mois
    type: integer
    format: int32
    public: true
    label: nombre de mois travaillés par le bénéficiaire dans la dernière année
    gender: masculine
  jours_travailles:
    description: nombre de jours travaillés dans les cinq dernières années (pour les intermittents)
    type: integer
    format: int32
    public: true
    label: nombre de jours travaillés par le bénéficiaire dans les cinq dernières années
    gender: masculine
  heures_travaillees:
    description: nombre d'heures travaillées dans les 18 derniers mois (pour les intérimaires)
    type: integer
    format: int32
    public: true
    label: nombre d'heures travaillées par le bénéficiaire dans les dix-huit derniers mois
    gender: masculine
  contrat:
    description: type de contrat du bénéficiaire
    type: string
    public: true
    enum:
      cdd: CDD
      cdi: CDI
      intermittent: intermittent
      interim: intérimaire
    label: type de contrat du bénéficiaire
    gender: masculine
  fin_contrat:
    type: string
    format: date
    public: true
    nullable: true
    label: date de fin de contrat du bénéficiaire
  mois_entreprise:
    description: ancienneté en mois dans l'entreprise actuelle
    alias: beneficiaire.anciennete_entreprise_actuelle
    type: integer
    format: int32
    public: true
    label: ancienneté en mois du bénéficiaire dans son entreprise
  heures_entreprise:
    description: ancienneté en heures dans l'entreprise
    type: integer
    format: int32
    public: true
    label: ancienneté en heures du bénéficiaire dans son entreprise
  commune:
    description: code INSEE de la commune où réside le bénéficiaire
    type: string
    public: true
    pattern: ^(2[AB]|[0-9]{2})[0-9]{3}$
    label: commune du bénéficiaire
  departement:
    description: code INSEE du département où réside le bénéficiaire
    type: string
    public: true
    pattern: ^(2[AB]|[0-9]{2,3})$
    label: département du bénéficiaire
    gender: masculine
    enum: &departements
      '01': Ain
      '02': Aisne
      '03': Allier
      '04': Alpes-de-Haute-Provence
      '05': Hautes-Alpes
      '06': Alpes-Maritimes
      '07': Ardèche
      '08': Ardennes
      '09': Ariège
      '10': Aube
      '11': Aude
      '12': Aveyron
      '13': Bouches-du-Rhône
      '14': Calvados
      '15': Cantal
      '16': Charente
      '17': Charente-Maritime
      '18': Cher
      '19': Corrèze
      '2A': Corse-du-Sud
      '2B': Haute-Corse
      '21': Côte-d'Or
      '22': Côtes-d'Armor
      '23': Creuse
      '24': Dordogne
      '25': Doubs
      '26': Drôme
      '27': Eure
      '28': Eure-et-Loir
      '29': Finistère
      '30': Gard
      '31': Haute-Garonne
      '32': Gers
      '33': Gironde
      '34': Hérault
      '35': Ille-et-Vilaine
      '36': Indre
      '37': Indre-et-Loire
      '38': Isère
      '39': Jura
      '40': Landes
      '41': Loir-et-Cher
      '42': Loire
      '43': Haute-Loire
      '44': Loire-Atlantique
      '45': Loiret
      '46': Lot
      '47': Lot-et-Garonne
      '48': Lozère
      '49': Maine-et-Loire
      '50': Manche
      '51': Marne
      '52': Haute-Marne
      '53': Mayenne
      '54': Meurthe-et-Moselle
      '55': Meuse
      '56': Morbihan
      '57': Moselle
      '58': Nièvre
      '59': Nord
      '60': Oise
      '61': Orne
      '62': Pas-de-Calais
      '63': Puy-de-Dôme
      '64': Pyrénées-Atlantiques
      '65': Hautes-Pyrénées
      '66': Pyrénées-Orientales
      '67': Bas-Rhin
      '68': Haut-Rhin
      '69': Rhône
      '70': Haute-Saône
      '71': Saône-et-Loire
      '72': Sarthe
      '73': Savoie
      '74': Haute-Savoie
      '75': Paris
      '76': Seine-Maritime
      '77': Seine-et-Marne
      '78': Yvelines
      '79': Deux-Sèvres
      '80': Somme
      '81': Tarn
      '82': Tarn-et-Garonne
      '83': Var
      '84': Vaucluse
      '85': Vendée
      '86': Vienne
      '87': Haute-Vienne
      '88': Vosges
      '89': Yonne
      '90': Territoire de Belfort
      '91': Essonne
      '92': Hauts-de-Seine
      '93': Seine-Saint-Denis
      '94': Val-de-Marne
      '95': Val-d'Oise
      '971': Guadeloupe
      '972': Martinique
      '973': Guyane
      '974': La Réunion
      '975': Saint-Pierre-et-Miquelon
      '976': Mayotte
  region:
    description: région où réside le bénéficiaire
    type: string
    label: région du bénéficiaire
    enum: &regions
      '01': Guadeloupe
      '02': Martinique
      '03': Guyane
      '04': La Réunion
      '06': Mayotte
      '11': Île-de-France
      '24': Centre-Val de Loire
      '27': Bourgogne-Franche-Comté
      '28': Normandie
      '32': Hauts-de-France
      '44': Grand-Est
      '52': Pays de la Loire
      '53': Bretagne
      '75': Nouvelle-Aquitaine
      '76': Occitanie
      '84': Auvergne-Rhône-Alpes
      '93': Provence-Alpes-Côte d'Azur
      '94': Corse
      # TODO remove old regions when we switch to API catalog
      '26': Bourgogne
      '43': Franche-Comté
      '23': Haute-Normandie
      '25': Basse-Normandie
      '31': Nord-Pas-de-Calais
      '22': Picardie
      '41': Lorraine
      '42': Alsace
      '21': Champagne-Ardenne
      '72': Aquitaine
      '54': Poitou-Charentes
      '74': Limousin
      '73': Midi-Pyrénées
      '91': Languedoc-Roussillon
      '82': Rhône-Alpes
      '83': Auvergne
  niveau_scolaire:
    alias: beneficiaire.niveauscolaire
    type: integer
    public: true
    label: niveau scolaire du bénéficiaire
    enum: &niveau_scolaire
      0: inconnu
      1: aucun
      2: VI
      3: V bis
      4: V
      5: IV
      6: III
      7: II
      8: I
  th:
    alias: beneficiaire.situation_th
    type: boolean
    public: true
    label: travailleur handicapé
  a_travaille_six_mois:
    alias: beneficiaire.situation_6moissur12
    type: boolean
    public: true
    label: bénéficiaire qui a déjà travaillé six mois sur une période de douze mois
  a_travaille_douze_mois:
    alias: beneficiaire.situation_6moissur12
    type: boolean
    public: true
    label: bénéficiaire non salarié qui a travaillé pendant douze mois dont au moins six mois consécutifs dans les trois ans qui précèdent l'entrée en formation
  entreprise:
    naf:
      description: l'identifiant NAF/APE de l'entreprise
      type: string
      format: naf
      pattern: ^\d{2}\.?\d{2}[a-zA-Z]$
      public: true
      label: code NAF de l'établissement du bénéficiaire
      gender: masculine
    idcc:
      description: l'identifiant de convention collective de l'établissement
      type: string
      format: idcc
      public: true
      label: IDCC de l'établissement du bénéficiaire
      gender: masculine
    commune:
      description: code INSEE de la commune de l'établissement du bénéficiaire
      type: string
      public: true
      pattern: ^(2[AB]|[0-9]{2})[0-9]{3}$
      label: code INSEE de la commune de l'établissement du bénéficiaire
      gender: masculine
    departement:
      description: département de l'entreprise
      type: string
      label: département de l'établissement du bénéficiaire
      enum: *departements
    region:
      description: région de l'entreprise
      type: string
      label: région de l'établissement du bénéficiaire
      enum: *regions
    opca:
      description: L'OPCA auquel est rattaché l'établissement du bénéficiaire. Optionnel, habituellement déduit de l'IDCC.
      type: string
      format: opca
      public: true
      nullable: true
      label: OPCA de l'établissement du bénéficiaire
      gender: masculine
    opacif:
      description: L'OPACIF auquel est rattaché l'établissement du bénéficiaire. Optionnel, habituellement déduit de l'IDCC.
      type: string
      format: opacif
      public: true
      nullable: true
      label: OPACIF de l'établissement du bénéficiaire
      gender: masculine
    iae:
      description: définit si c'est une entreprise d'insertion par l'activité économique
      type: boolean
      label: entreprise d'insertion par l'activité économique
formation:
  intitule:
    type: string
    public: true
    label: intitulé de la formation
    xpath: string(//intitule-formation)
    source: catalogue
  intitule_norme:
    description: intitulé de la formation sans accent ni signes diacritiques et tout en minuscules
    type: string
    label: intitulé normé de la formation
    # Allow to set an empty intitule_norme (occurs when the intitule itself is an empty string).
    default: ""
  numero:
    description: identifiant INTERCARIF de la formation
    type: string
    public: true
    label: identifiant de la formation
  departement:
    description: code INSEE du département où se passe la formation
    type: string
    public: true
    xpath: string((//lieu-de-formation[1]/coordonnees/adresse/departement)[1])
    source: catalogue
    label: département de la formation
    enum: *departements
    gender: masculine
  region:
    description: code INSEE du département où se passe la formation
    type: string
    public: true
    xpath: string((//lieu-de-formation[1]/coordonnees/adresse/region)[1])
    source: catalogue
    label: région de la formation
    enum: *regions
  siret_organisme:
    type: integer
    format: int32
    public: true
    source: catalogue
    xpath: string(//organisme-formation-responsable/SIRET-organisme-formation/SIRET/child::text())
    label: SIRET de l'organisme de formation
    gender: masculine
  codes_financeur:
    description: codes des organismes financeurs de la formation
    type: array
    format: set
    items:
      type: integer
      enum: *codes_financeur
    source: catalogue
    xpath: //organisme-financeur/code-financeur/child::text()
    label: codes financeur de la formation
    gender: masculine
    number: plural
    url: http://lheo.gouv.fr/langage#dict-financeurs
  eligible_copanef:
    description: cette formation est au catalogue COPANEF
    type: boolean
    source: catalogue
    xpath: boolean(//extras[@info="eligibilite-cpf"]/extra[@info="france-entiere"][text()="1"]/../extra[@info="inter-branche"][text()="1"])
    label: formation éligible COPANEF
  eligible_coparef:
    description: cette formation est au catalogue COPAREF
    type: boolean
    source: catalogue
    label: formation éligible COPAREF de la région du bénéficiaire
  regions_coparef:
    description: régions d'éligibilité si COPAREF dans les listes_eligibilite_cpf
    type: array
    format: set
    items:
      type: string
      enum: *regions
    source: catalogue
    xpath: //extras[@info="eligibilite-cpf"]/extra[@info="region"]/child::text()
    label: régions éligibles COPAREF
  codes_rome:
    type: array
    format: set
    items:
      type: string
    source: catalogue
    xpath: //domaine-formation/code-ROME/child::text()
    label: liste des codes ROME de la formation
  codes_formacode:
    type: array
    format: set
    items:
      type: integer
      format: formacode
    source: catalogue
    xpath: //domaine-formation/code-FORMACODE/child::text()
    label: liste des codes FORMACODE de la formation
  domaines_formacode:
    description: domaines (trois premiers caractères des codes) FORMACODE de la formation
    type: array
    format: set
    items:
      type: integer
      format: domaine_formacode
    xpath: //domaine-formation/code-FORMACODE/child::text()
    source: catalogue
    label: liste des domaines FORMACODE de la formation
  code_certifinfo:
    type: integer
    format: int32
    source: catalogue
    xpath: string(//certification/code-CERTIFINFO/child::text())
    label: code CERTIFINFO de la formation
    gender: masculine
  code_rncp:
    type: integer
    format: int32
    source: catalogue
    xpath: string(//certification/code-RNCP/child::text())
    label: code RNCP de la formation
    gender: masculine
  heures:
    type: integer
    format: int32
    source: catalogue
    xpath: string(//nombre-heures-total/child::text())
    label: durée en heures de la formation
  heures_entreprise:
    type: integer
    format: int32
    source: catalogue
    xpath: string(//nombre-heures-entreprise/child::text())
    label: nombre d'heures en entreprise
    gender: masculine
  heures_centre:
    type: integer
    format: int32
    source: catalogue
    xpath: string(//nombre-heures-centre/child::text())
    label: nombre d'heures en centre
    gender: masculine
  mois:
    type: integer
    format: int32
    label: durée en mois de la formation
  semaines:
    type: integer
    format: int32
    label: durée en semaines de la formation
  duree_hebdo:
    type: integer
    format: int32
    source: catalogue
    xpath: string(//extras[@info="duree-hebdo"]/extra[@info="duree-hebdo"]/child::text())
    label: durée hebdomadaire de la formation
  prix_horaire:
    type: integer
    format: float
    default: 0
    source: catalogue
    xpath: //prix-horaire-TTC/child::text()
    label: prix horaire de la formation
    description: prix horaire TTC de la formation
    gender: masculine
  prix_total:
    type: integer
    format: float
    source: catalogue
    xpath: //prix-total-TTC/child::text()
    label: prix total de la formation
    description: prix total TTC de la formation
    gender: masculine
  prix_horaire_ht:
    type: integer
    format: float
    label: prix horaire HT de la formation
  codes_cpf:
    description: codes CPF de la formation
    type: array
    format: set
    items:
      type: integer
      format: int32
    source: catalogue
    xpath: //extras[@info="eligibilite-cpf"]/@numero
    label: liste des codes CPF de la formation
  codes_naf:
    description: codes NAF des différents CPNE
    type: array
    format: set
    items:
      type: string
      format: naf
    source: catalogue
    xpath: //extras[@info="eligibilite-cpf"]/extra[@info="branche"]/child::text()
    label: codes NAF CPNE éligibles
    number: plural
  objectif_general_formation:
    description: code AIS de la formation (http://lheo.gouv.fr/langage#dict-AIS)
    label: code AIS de la formation
    type: integer
    formation: int32
    source: catalogue
    xpath: string(//objectif-general-formation/child::text())
    enum: *codes_ais
  debut:
    description: date de début de la formation
    label: date de début de la formation
    type: string
    format: date
    source: catalogue
    xpath: string((//periode/debut)[1]/child::text())
  fin:
    description: date de fin de la formation
    label: date de fin de la formation
    type: string
    format: date
    source: catalogue
    xpath: string((//periode/fin)[1]/child::text())
  rff:
    type: boolean
    label: formation éligible à la RFF
  foad:
    type: boolean
    source: catalogue
    xpath: boolean(//modalites-enseignement[text()="2"])
    label: formation ouverte à distance
  langues:
    type: boolean
    source: catalogue
    label: formation langues
  langues_etrangeres:
    type: boolean
    source: catalogue
    label: formation langues étrangères
  fle:
    type: boolean
    source: catalogue
    label: formation FLE
  toeic:
    type: boolean
    source: catalogue
    label: formation TOEIC
  toefl:
    type: boolean
    source: catalogue
    label: formation TOEFL
  tosa:
    type: boolean
    source: catalogue
    label: formation TOSA
  fimo:
    type: boolean
    source: catalogue
    label: formation FIMO
  bulats:
    type: boolean
    source: catalogue
    label: formation BULATS
  caces:
    type: boolean
    source: catalogue
    label: formation CACES
  pcp:
    type: boolean
    source: catalogue
    label: formation PCP
  cared:
    type: boolean
    source: catalogue
    label: formation CARED
  e2c:
    type: boolean
    source: catalogue
    label: formation E2C
  bec:
    type: boolean
    source: catalogue
    label: formation BEC
  pfb:
    type: boolean
    source: catalogue
    label: formation PFB
  bilan_de_competences:
    type: boolean
    source: catalogue
    label: bilan de compétences
    gender: masculine
  permis_b:
    type: boolean
    source: catalogue
    label: permis B
    gender: masculine
  spi:
    type: boolean
    source: catalogue
    label: stage de préparation à l'installation
    gender: masculine
  certifiante:
    type: boolean
    source: catalogue
    xpath: boolean(number(//certifiante/text()))
    label: formation certifiante
  professionnalisante:
    type: boolean
    source: catalogue
    xpath: not(boolean(//certification))
    label: formation professionnalisante
  enseignement_superieur:
    type: boolean
    source: catalogue
    label: formation de l'enseignement supérieur
  vae:
    type: boolean
    source: catalogue
    label: formation VAE
  clea:
    type: boolean
    source: catalogue
    label: formation CléA
  poec:
    type: boolean
    source: catalogue
    xpath: boolean(//organisme-financeur/extras/extra[@info="programme-financeur"][text()="POEC"])
    label: préparation opérationnelle à l'emploi collective
  poei:
    type: boolean
    source: catalogue
    xpath: boolean(//organisme-financeur/extras/extra[@info="programme-financeur"][text()="POEI"])
    label: préparation opérationnelle à l'emploi individuelle
  poe:
    type: boolean
    source: catalogue
    label: préparation opérationnelle à l'emploi
  daeu:
    type: boolean
    source: catalogue
    label: diplôme d'accès aux études universitaires
    gender: masculine
  rncp:
    type: boolean
    source: catalogue
    xpath: boolean(//certification/code-RNCP/child::text())
    label: formation RNCP
    description: cette formation est inscrite au RNCP
  contrat_apprentissage:
    type: boolean
    source: catalogue
    xpath: boolean(//extras[@info="dispositif"]/extra[@info="contrat-apprentissage"][text()="1"])
    label: contrat d'apprentissage
    gender: masculine
  contrat_professionnalisation:
    type: boolean
    source: catalogue
    xpath: boolean(//extras[@info="dispositif"]/extra[@info="contrat-professionnalisation"][text()="1"])
    label: contrat de professionnalisation
    gender: masculine
  developpement_professionnel:
    type: boolean
    label: formation en développement professionnel
  niveau_sortie:
    description: le niveau du diplôme de sortie (licence, master…)
    type: integer
    format: int32
    label: niveau de sortie de la formation
    source: catalogue
    # Don't use number() xpath function so empty node does not return nan.
    # And we cast in python anyway.
    xpath: string(//code-niveau-sortie/child::text())
    gender: masculine
    url: http://lheo.gouv.fr/langage#dict-niveaux
    enum: *niveau_scolaire
  entrees_sorties:
    type: integer
    format: int32
    source: catalogue
    xpath: string(//modalites-entrees-sorties)
    enum:
      0: entrées/sorties à dates fixes
      1: entrées/sorties permanentes
    label: modalités d'entrées-sorties
  entrees_sorties_permanentes:
    type: boolean
    source: catalogue
    xpath: boolean(//modalites-entrees-sorties[text()="1"])
    label: formation à entrées-sorties permanentes
  individuels:
    type: boolean
    label: formation ouverte aux bénéficiaires individuels
financement:
  intitule:
    type: string
    public: true
    label: intitulé du financement
  tags:
    type: array
    items:
      type: string
    public: true
    label: catégories du financement
  sigle:
    type: string
    public: true
    label: sigle du financement
  eligible:
    description: définit si le financement est éligible
    type: boolean
    public: true
    label: financement éligible
  description:
    description: description du financement
    type: string
    public: true
    label: texte de description
  en_savoir_plus:
    description: description du financement
    type: string
    public: true
    label: texte pour en savoir plus
  demarches:
    description: démarches à accomplir pour obtenir le financement
    type: string
    public: true
    label: texte des démarches
  remuneration:
    type: integer
    format: float
    public: true
    nullable: true
    label: rémunération applicable
  remuneration_annee_2:
    type: integer
    format: float
    public: true
    nullable: true
    label: rémunération applicable la deuxième année
  remuneration_annee_3:
    type: integer
    format: float
    public: true
    nullable: true
    label: rémunération applicable la troisième année
  remuneration_texte:
    type: string
    public: true
    nullable: true
    label: texte de la rémunération
  indemnite_conges_payes:
    type: integer
    format: int32
    public: true
    nullable: true
    label: indemnité compensatrice de congés payés
  plafond_remuneration:
    type: integer
    format: int32
    public: true
    nullable: true
    label: plafond de rémunération applicable
  prise_en_charge:
    type: integer
    format: int32
    public: true
    nullable: true
    label: montant de prise en charge
    description: valeur définie seulement si le prix horaire de la formation est défini
  prise_en_charge_texte:
    type: string
    public: true
    nullable: true
    label: texte de la prise en charge
  plafond_prise_en_charge:
    type: integer
    format: int32
    public: true
    nullable: true
    label: plafond de prise en charge
    description: Ce champ est défini quand on ne connaît pas le prix horaire de la formation. C'est donc une prise en charge maximale théorique, la prise en charge réelle dépendra du prix exact de la formation.
  plafond_financier:
    type: integer
    format: float
    label: plafond financier applicable
  plafond_horaire:
    type: integer
    format: int32
    label: plafond horaire applicable
    description: nombre maximal d'heures prises en charge
  plafond_prix_horaire:
    type: integer
    format: float
    public: true
    label: prix horaire plafond applicable
    description: prix horaire maximum
  prix_horaire:
    type: integer
    format: float
    label: prix horaire applicable
  heures:
    type: integer
    format: int32
    label: heures financées
    description: nombre d'heures effectivement prises en charge
    public: true
  reste_a_charge:
    type: number
    format: float
    public: true
    label: reste à charge applicable
  rff:
    type: number
    format: float
    public: true
    nullable: true
    label: RFF applicable
    description: montant de la RFF si applicable
  debut_rff:
    type: string
    format: date
    public: true
    nullable: true
    label: date de début de la RFF applicable
  fin_rff:
    type: string
    format: date
    public: true
    nullable: true
    label: date de fin de la RFF applicable
  fin_remuneration:
    type: string
    format: date
    nullable: true
    public: true
    label: date de fin de la rémunération applicable
  ressources:
    type: array
    public: true
    items:
      type: string
      format: url
    description: Liste d'adresses Internet pour en savoir plus sur le sujet.
  explain:
    type: array
    public: true
    nullable: true
    items:
      type: object
      properties:
        condition:
          type: string
        status:
          type: boolean
        connective:
          type: string
        reason:
          type: string
          nullable: true
        params:
          type: object
          additionalProperties:
            type: string
            nullable: true
        terms:
          # TODO dry me
          type: array
          items:
            type: object
            # See https://github.com/p1c2u/openapi-core/issues/33#issuecomment-403022629
            additionalProperties:
              type: string
              nullable: true
        children:
          # TODO dry me
          type: array
          items:
            type: object
            # See https://github.com/p1c2u/openapi-core/issues/33#issuecomment-403022629
            additionalProperties:
              type: string
              nullable: true
    description: Liste de conditions nécessaires pour rendre ce financement éligible
  organisme:
    nom:
      public: true
      type: string
      label: organisme paritaire
    agence:
      description: le nom de l'antenne locale à contacter le cas échéant
      type: string
      label: nom de l'agence à contacter
    adresse:
      public: true
      type: string
      label: adresse postale de l'organisme
    telephone:
      public: true
      type: string
      label: téléphone de l'organisme
    web:
      public: true
      type: string
      label: site web de l'organisme
